# Lexiconè‹±è¯­å­¦ä¹ å¹³å°å®æ—¶è¯­éŸ³å¯¹è¯AIé›†æˆæ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–¹æ¡ˆåŸºäºè…¾è®¯äº‘å¼€å‘AIå¼€å‘å¥—ä»¶ï¼Œä¸ºLexiconè‹±è¯­å­¦ä¹ å¹³å°é›†æˆå®æ—¶è¯­éŸ³å¯¹è¯åŠŸèƒ½ï¼Œæ‰“é€ æ™ºèƒ½è‹±è¯­å£è¯­ç»ƒä¹ AIåŠ©æ‰‹ã€‚è¯¥åŠŸèƒ½å°†ä¸ç°æœ‰çš„FSRSèƒŒå•è¯ç³»ç»Ÿæ·±åº¦æ•´åˆï¼Œæä¾›å®Œæ•´çš„è‹±è¯­å­¦ä¹ é—­ç¯ã€‚

### ç›®æ ‡ç”¨æˆ·
- å‰ç¥¥èˆªç©ºå®‰å…¨å‘˜è‹±è¯­åŸ¹è®­
- è‹±è¯­å£è¯­ç»ƒä¹ å­¦ä¹ è€…
- éœ€è¦å®æ—¶è¯­éŸ³åé¦ˆçš„å­¦ä¹ è€…

### æ ¸å¿ƒä»·å€¼
- **å®æ—¶è¯­éŸ³äº¤äº’**ï¼šæ”¯æŒè¯­éŸ³è¾“å…¥å’Œè¯­éŸ³è¾“å‡ºçš„è‡ªç„¶å¯¹è¯
- **æ™ºèƒ½AIæ•™ç»ƒ**ï¼šåŸºäºå­¦ä¹ è¿›åº¦æä¾›ä¸ªæ€§åŒ–å£è¯­ç»ƒä¹ 
- **å‘éŸ³çº é”™**ï¼šå®æ—¶è¯­éŸ³è¯†åˆ«å’Œå‘éŸ³è¯„ä¼°
- **æƒ…å¢ƒå¯¹è¯**ï¼šæ¨¡æ‹ŸçœŸå®èˆªç©ºè‹±è¯­å¯¹è¯åœºæ™¯

## ğŸ¯ åŠŸèƒ½è®¾è®¡

### 1. è¯­éŸ³å¯¹è¯ç•Œé¢
- **è¯­éŸ³è¾“å…¥æŒ‰é’®**ï¼šé•¿æŒ‰å½•éŸ³ï¼Œæ¾å¼€å‘é€
- **å®æ—¶è¯­éŸ³è½¬æ–‡å­—**ï¼šæ˜¾ç¤ºè¯†åˆ«ç»“æœ
- **AIè¯­éŸ³å›å¤**ï¼šè‡ªç„¶è¯­éŸ³åˆæˆå›ç­”
- **å¯¹è¯å†å²**ï¼šä¿å­˜å¯¹è¯è®°å½•å’Œè¯„åˆ†

### 2. æ™ºèƒ½å¯¹è¯åŠŸèƒ½
- **è‡ªç”±å¯¹è¯æ¨¡å¼**ï¼šå¼€æ”¾å¼è‹±è¯­å¯¹è¯ç»ƒä¹ 
- **æƒ…å¢ƒç»ƒä¹ æ¨¡å¼**ï¼šèˆªç©ºè‹±è¯­ä¸“ä¸šæœ¯è¯­ç»ƒä¹ 
- **å‘éŸ³è¯„ä¼°**ï¼šå®æ—¶å‘éŸ³è¯„åˆ†å’Œçº é”™å»ºè®®
- **å­¦ä¹ å»ºè®®**ï¼šåŸºäºå¯¹è¯è¡¨ç°æä¾›å­¦ä¹ å»ºè®®

### 3. å­¦ä¹ æ•°æ®åˆ†æ
- **å‘éŸ³å‡†ç¡®ç‡ç»Ÿè®¡**ï¼šè·Ÿè¸ªå‘éŸ³æ”¹å–„è¿›åº¦
- **è¯æ±‡ä½¿ç”¨åˆ†æ**ï¼šè¯†åˆ«å¸¸ç”¨è¯æ±‡å’Œè–„å¼±ç¯èŠ‚
- **å¯¹è¯æ—¶é•¿ç»Ÿè®¡**ï¼šè®°å½•å­¦ä¹ æ—¶é—´å’Œé¢‘ç‡
- **è¿›æ­¥æ›²çº¿å±•ç¤º**ï¼šå¯è§†åŒ–å­¦ä¹ è¿›åº¦

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ç•Œé¢å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  è¯­éŸ³å½•åˆ¶ç»„ä»¶   â”‚  â”‚  å¯¹è¯ç•Œé¢ç»„ä»¶   â”‚  â”‚  å­¦ä¹ ç»Ÿè®¡ç»„ä»¶   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API æ¥å£å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ASR è¯­éŸ³è¯†åˆ«   â”‚  â”‚  TTS è¯­éŸ³åˆæˆ   â”‚  â”‚  Agent å¯¹è¯     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº‘å‡½æ•°å¤„ç†å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  voice-agent    â”‚  â”‚  voice-analysis â”‚  â”‚  conversation   â”‚â”‚
â”‚  â”‚  è¯­éŸ³AIå¯¹è¯     â”‚  â”‚  å‘éŸ³åˆ†æ       â”‚  â”‚  å¯¹è¯ç®¡ç†       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  conversation   â”‚  â”‚  voice_scores   â”‚  â”‚  learning_stats â”‚â”‚
â”‚  â”‚  å¯¹è¯è®°å½•       â”‚  â”‚  å‘éŸ³è¯„åˆ†       â”‚  â”‚  å­¦ä¹ ç»Ÿè®¡       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 18 + TypeScript + Web Audio API
- **åç«¯**: è…¾è®¯äº‘å¼€å‘ + äº‘å‡½æ•° + äº‘æ•°æ®åº“
- **AIèƒ½åŠ›**: äº‘å¼€å‘AIå¼€å‘å¥—ä»¶ + BotCoreæ¡†æ¶
- **è¯­éŸ³æŠ€æœ¯**: è…¾è®¯ASR + è…¾è®¯TTS + å‘éŸ³è¯„ä¼°API

## ğŸ”§ å®ç°æ–¹æ¡ˆ

### 1. å‰ç«¯è¯­éŸ³ç»„ä»¶å¼€å‘

#### 1.1 è¯­éŸ³å½•åˆ¶ç»„ä»¶ (VoiceRecorder.tsx)
```typescript
import React, { useState, useRef, useEffect } from 'react';
import { Mic, MicOff, Volume2 } from 'lucide-react';

interface VoiceRecorderProps {
  onRecordingComplete: (audioBlob: Blob) => void;
  onTranscriptionReceived: (text: string) => void;
  isProcessing: boolean;
}

export const VoiceRecorder: React.FC<VoiceRecorderProps> = ({
  onRecordingComplete,
  onTranscriptionReceived,
  isProcessing
}) => {
  const [isRecording, setIsRecording] = useState(false);
  const [audioLevel, setAudioLevel] = useState(0);
  const mediaRecorderRef = useRef<MediaRecorder | null>(null);
  const audioContextRef = useRef<AudioContext | null>(null);
  const analyserRef = useRef<AnalyserNode | null>(null);
  
  // å®ç°è¯­éŸ³å½•åˆ¶ã€å®æ—¶éŸ³é‡æ˜¾ç¤ºã€è‡ªåŠ¨è¯†åˆ«ç­‰åŠŸèƒ½
  // ...
};
```

#### 1.2 å¯¹è¯ç•Œé¢ç»„ä»¶ (VoiceConversation.tsx)
```typescript
import React, { useState, useEffect, useRef } from 'react';
import { VoiceRecorder } from './VoiceRecorder';
import { ConversationHistory } from './ConversationHistory';
import { VoiceAnalysis } from './VoiceAnalysis';

interface ConversationMessage {
  id: string;
  type: 'user' | 'ai';
  content: string;
  audioUrl?: string;
  timestamp: Date;
  pronunciationScore?: number;
}

export const VoiceConversation: React.FC = () => {
  const [messages, setMessages] = useState<ConversationMessage[]>([]);
  const [isProcessing, setIsProcessing] = useState(false);
  const [currentMode, setCurrentMode] = useState<'free' | 'scenario'>('free');
  
  // å®ç°å¯¹è¯ç®¡ç†ã€æ¶ˆæ¯å¤„ç†ã€æ¨¡å¼åˆ‡æ¢ç­‰åŠŸèƒ½
  // ...
};
```

### 2. äº‘å‡½æ•°å¼€å‘

#### 2.1 è¯­éŸ³AIå¯¹è¯äº‘å‡½æ•° (voice-agent)
```javascript
// cloudfunctions/voice-agent/index.js
const { BotCore } = require('@cloudbase/bot-core');
const cloudbase = require('@cloudbase/node-sdk');

const app = cloudbase.init({
  env: cloudbase.SYMBOL_CURRENT_ENV
});

// åˆå§‹åŒ–è‹±è¯­å¯¹è¯AI
const englishBot = new BotCore({
  model: 'gpt-4',
  systemPrompt: `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è‹±è¯­å£è¯­æ•™ç»ƒï¼Œä¸“é—¨ä¸ºèˆªç©ºå®‰å…¨å‘˜æä¾›è‹±è¯­åŸ¹è®­ã€‚
  ä½ çš„ä»»åŠ¡æ˜¯ï¼š
  1. ä¸ç”¨æˆ·è¿›è¡Œè‹±è¯­å¯¹è¯ç»ƒä¹ 
  2. çº æ­£å‘éŸ³å’Œè¯­æ³•é”™è¯¯
  3. æä¾›èˆªç©ºè‹±è¯­ä¸“ä¸šæœ¯è¯­æŒ‡å¯¼
  4. æ ¹æ®ç”¨æˆ·æ°´å¹³è°ƒæ•´å¯¹è¯éš¾åº¦
  5. ç»™å‡ºå»ºè®¾æ€§çš„å­¦ä¹ å»ºè®®
  
  è¯·ç”¨çº¯è‹±æ–‡å›å¤ï¼Œè¯­è¨€ç®€æ´è‡ªç„¶ï¼Œé€‚åˆå£è¯­ç»ƒä¹ ã€‚`,
  temperature: 0.7,
  maxTokens: 1000
});

// æ·»åŠ èˆªç©ºè‹±è¯­ä¸“ä¸šå·¥å…·
englishBot.addTool({
  name: 'getAviationTerms',
  description: 'è·å–èˆªç©ºè‹±è¯­ä¸“ä¸šæœ¯è¯­',
  function: async (context) => {
    const db = app.database();
    const terms = await db.collection('aviation_terms')
      .where({ category: context || 'safety' })
      .get();
    return terms.data;
  }
});

// æ·»åŠ ç”¨æˆ·å­¦ä¹ å†å²å·¥å…·
englishBot.addTool({
  name: 'getUserLearningHistory',
  description: 'è·å–ç”¨æˆ·å­¦ä¹ å†å²',
  function: async (userId) => {
    const db = app.database();
    const history = await db.collection('voice_conversations')
      .where({ userId, createdAt: db.command.gte(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)) })
      .orderBy('createdAt', 'desc')
      .limit(10)
      .get();
    return history.data;
  }
});

exports.main = async (event, context) => {
  try {
    const { message, userId, sessionId, conversationMode = 'free' } = event;
    
    // è·å–ç”¨æˆ·å­¦ä¹ å†å²ç”¨äºä¸ªæ€§åŒ–å¯¹è¯
    const userHistory = await englishBot.callTool('getUserLearningHistory', userId);
    
    // æ ¹æ®å¯¹è¯æ¨¡å¼è°ƒæ•´ç³»ç»Ÿæç¤º
    let modePrompt = '';
    if (conversationMode === 'scenario') {
      modePrompt = 'ç°åœ¨è¿›è¡Œèˆªç©ºå®‰å…¨åœºæ™¯å¯¹è¯ç»ƒä¹ ï¼Œè¯·æ¨¡æ‹ŸçœŸå®çš„èˆªç©ºå·¥ä½œç¯å¢ƒã€‚';
    }
    
    // ç”ŸæˆAIå›å¤
    const response = await englishBot.chat({
      message: `${modePrompt}\nç”¨æˆ·è¯´ï¼š${message}`,
      sessionId,
      userId,
      context: {
        userHistory: userHistory.slice(0, 5), // æœ€è¿‘5æ¡è®°å½•
        conversationMode
      }
    });
    
    // ä¿å­˜å¯¹è¯è®°å½•
    const db = app.database();
    await db.collection('voice_conversations').add({
      userId,
      sessionId,
      userMessage: message,
      aiResponse: response.content,
      conversationMode,
      createdAt: new Date()
    });
    
    return {
      code: 0,
      data: {
        response: response.content,
        sessionId: response.sessionId
      }
    };
  } catch (error) {
    console.error('Voice Agent Error:', error);
    return {
      code: -1,
      error: error.message
    };
  }
};
```

#### 2.2 è¯­éŸ³åˆ†æäº‘å‡½æ•° (voice-analysis)
```javascript
// cloudfunctions/voice-analysis/index.js
const cloudbase = require('@cloudbase/node-sdk');

const app = cloudbase.init({
  env: cloudbase.SYMBOL_CURRENT_ENV
});

// æ¨¡æ‹Ÿå‘éŸ³è¯„ä¼°é€»è¾‘ï¼ˆå®é™…é¡¹ç›®ä¸­å¯æ¥å…¥ä¸“ä¸šçš„è¯­éŸ³è¯„ä¼°APIï¼‰
const evaluatePronunciation = async (audioBuffer, referenceText) => {
  // è¿™é‡Œå¯ä»¥é›†æˆè…¾è®¯äº‘çš„è¯­éŸ³è¯„ä¼°API
  // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿè¯„åˆ†
  const score = Math.floor(Math.random() * 20) + 80; // 80-100åˆ†
  
  return {
    overallScore: score,
    pronunciationScore: score,
    fluencyScore: Math.floor(Math.random() * 15) + 85,
    accuracyScore: Math.floor(Math.random() * 10) + 90,
    feedback: score > 90 ? 'Excellent pronunciation!' : 
              score > 80 ? 'Good pronunciation, keep practicing!' : 
              'Need more practice on pronunciation.'
  };
};

exports.main = async (event, context) => {
  try {
    const { audioData, referenceText, userId } = event;
    
    // è¯­éŸ³è´¨é‡æ£€æµ‹
    const audioBuffer = Buffer.from(audioData, 'base64');
    
    // å‘éŸ³è¯„ä¼°
    const evaluation = await evaluatePronunciation(audioBuffer, referenceText);
    
    // ä¿å­˜è¯„ä¼°ç»“æœ
    const db = app.database();
    await db.collection('voice_scores').add({
      userId,
      referenceText,
      evaluation,
      createdAt: new Date()
    });
    
    // æ›´æ–°ç”¨æˆ·å­¦ä¹ ç»Ÿè®¡
    await db.collection('learning_stats').doc(userId).update({
      totalVoicePractice: db.command.inc(1),
      averagePronunciationScore: evaluation.overallScore,
      lastPracticeDate: new Date()
    });
    
    return {
      code: 0,
      data: evaluation
    };
  } catch (error) {
    console.error('Voice Analysis Error:', error);
    return {
      code: -1,
      error: error.message
    };
  }
};
```

### 3. è¯­éŸ³æŠ€æœ¯é›†æˆ

#### 3.1 ASRè¯­éŸ³è¯†åˆ«é…ç½®
```javascript
// src/services/voiceService.ts
import { app } from '../utils/cloudbase';

export class VoiceService {
  // é…ç½®ASRè¯­éŸ³è¯†åˆ«
  static async initASR() {
    const asrConfig = {
      engine: 'tencent-asr',
      language: 'en-US', // è‹±è¯­è¯†åˆ«
      sampleRate: 16000,
      format: 'wav'
    };
    
    return asrConfig;
  }
  
  // è¯­éŸ³è¯†åˆ«
  static async speechToText(audioBlob: Blob): Promise<string> {
    const arrayBuffer = await audioBlob.arrayBuffer();
    const audioData = Buffer.from(arrayBuffer).toString('base64');
    
    const result = await app.callFunction({
      name: 'speech-recognition',
      data: {
        audioData,
        config: await this.initASR()
      }
    });
    
    return result.result.text;
  }
  
  // è¯­éŸ³åˆæˆ
  static async textToSpeech(text: string): Promise<string> {
    const result = await app.callFunction({
      name: 'text-to-speech',
      data: {
        text,
        config: {
          engine: 'tencent-tts',
          voice: 'en-US-Standard-A', // è‹±è¯­å¥³å£°
          speed: 1.0,
          pitch: 0.0
        }
      }
    });
    
    return result.result.audioUrl;
  }
}
```

### 4. æ•°æ®åº“è®¾è®¡

#### 4.1 å¯¹è¯è®°å½•è¡¨ (voice_conversations)
```javascript
{
  _id: "conversation_id",
  userId: "user_id",
  sessionId: "session_id",
  userMessage: "Hello, how are you?",
  aiResponse: "I'm doing well, thank you! How can I help you practice English today?",
  conversationMode: "free", // "free" æˆ– "scenario"
  createdAt: Date,
  updatedAt: Date
}
```

#### 4.2 å‘éŸ³è¯„åˆ†è¡¨ (voice_scores)
```javascript
{
  _id: "score_id",
  userId: "user_id",
  referenceText: "Hello, how are you?",
  evaluation: {
    overallScore: 85,
    pronunciationScore: 82,
    fluencyScore: 88,
    accuracyScore: 90,
    feedback: "Good pronunciation, keep practicing!"
  },
  createdAt: Date
}
```

#### 4.3 å­¦ä¹ ç»Ÿè®¡è¡¨ (learning_stats)
```javascript
{
  _id: "user_id",
  userId: "user_id",
  totalVoicePractice: 150,
  averagePronunciationScore: 85.5,
  totalConversationTime: 3600, // ç§’
  lastPracticeDate: Date,
  weeklyProgress: {
    "2024-01": {
      sessions: 15,
      avgScore: 84.2,
      totalTime: 900
    }
  },
  createdAt: Date,
  updatedAt: Date
}
```

### 5. èˆªç©ºè‹±è¯­ä¸“ä¸šæœ¯è¯­åº“

#### 5.1 æœ¯è¯­åˆ†ç±»è¡¨ (aviation_terms)
```javascript
{
  _id: "term_id",
  term: "emergency evacuation",
  category: "safety",
  definition: "The urgent removal of passengers from an aircraft in case of emergency",
  pronunciation: "/ÉªËˆmÉœËrdÊ’É™nsi ÉªËŒvÃ¦kjuËˆeÉªÊƒÉ™n/",
  example: "Flight attendants are trained to conduct emergency evacuation procedures.",
  difficulty: "intermediate",
  frequency: "high",
  createdAt: Date
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# 1. ç¡®ä¿äº‘å¼€å‘ç¯å¢ƒå·²é…ç½®
npm install @cloudbase/node-sdk @cloudbase/bot-core

# 2. å®‰è£…å‰ç«¯ä¾èµ–
npm install lucide-react framer-motion

# 3. é…ç½®ç¯å¢ƒå˜é‡
export CLOUDBASE_ENV_ID="your-env-id"
```

### 2. äº‘å‡½æ•°éƒ¨ç½²

```bash
# éƒ¨ç½²è¯­éŸ³AIå¯¹è¯å‡½æ•°
tcb fn deploy voice-agent --dir cloudfunctions/voice-agent

# éƒ¨ç½²è¯­éŸ³åˆ†æå‡½æ•°  
tcb fn deploy voice-analysis --dir cloudfunctions/voice-analysis

# éƒ¨ç½²è¯­éŸ³è¯†åˆ«å‡½æ•°
tcb fn deploy speech-recognition --dir cloudfunctions/speech-recognition

# éƒ¨ç½²è¯­éŸ³åˆæˆå‡½æ•°
tcb fn deploy text-to-speech --dir cloudfunctions/text-to-speech
```

### 3. æ•°æ®åº“åˆå§‹åŒ–

```bash
# åˆ›å»ºæ•°æ®åº“é›†åˆ
node scripts/init-voice-database.js

# å¯¼å…¥èˆªç©ºè‹±è¯­æœ¯è¯­
node scripts/import-aviation-terms.js
```

### 4. å‰ç«¯é›†æˆ

```bash
# æ„å»ºå¹¶éƒ¨ç½²å‰ç«¯
npm run build
cloudbase hosting deploy dist -e your-env-id
```

## ğŸ“± ä½¿ç”¨è¯´æ˜

### 1. è¯­éŸ³å¯¹è¯æ¨¡å¼

#### è‡ªç”±å¯¹è¯æ¨¡å¼
- ç‚¹å‡»"å¼€å§‹å¯¹è¯"è¿›å…¥è‡ªç”±å¯¹è¯æ¨¡å¼
- é•¿æŒ‰å½•éŸ³æŒ‰é’®è¿›è¡Œè¯­éŸ³è¾“å…¥
- AIä¼šç”¨è‹±è¯­å›å¤å¹¶æä¾›å‘éŸ³å»ºè®®
- æ”¯æŒè¯é¢˜åˆ‡æ¢å’Œéš¾åº¦è°ƒæ•´

#### æƒ…å¢ƒç»ƒä¹ æ¨¡å¼
- é€‰æ‹©"èˆªç©ºæƒ…å¢ƒç»ƒä¹ "
- ç³»ç»Ÿä¼šæ¨¡æ‹ŸçœŸå®çš„èˆªç©ºå·¥ä½œåœºæ™¯
- ç»ƒä¹ ä¸“ä¸šæœ¯è¯­å’Œæ ‡å‡†ç”¨è¯­
- æä¾›åœºæ™¯ç›¸å…³çš„å¯¹è¯å¼•å¯¼

### 2. å‘éŸ³è¯„ä¼°åŠŸèƒ½

- æ¯æ¬¡è¯­éŸ³è¾“å…¥åè‡ªåŠ¨è¿›è¡Œå‘éŸ³è¯„ä¼°
- æ˜¾ç¤ºå‘éŸ³å‡†ç¡®ç‡ã€æµç•…åº¦å’Œæ•´ä½“è¯„åˆ†
- æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®
- è®°å½•å‘éŸ³è¿›æ­¥æ›²çº¿

### 3. å­¦ä¹ ç»Ÿè®¡

- æŸ¥çœ‹æ¯æ—¥å¯¹è¯ç»ƒä¹ æ—¶é•¿
- è·Ÿè¸ªå‘éŸ³æ”¹å–„è¿›åº¦
- åˆ†æå¸¸ç”¨è¯æ±‡å’Œè–„å¼±ç¯èŠ‚
- è®¾å®šå­¦ä¹ ç›®æ ‡å’Œè¿›åº¦æé†’

## ğŸ”§ æ‰©å±•åŠŸèƒ½

### 1. é«˜çº§è¯­éŸ³åŠŸèƒ½
- **è¯­é€Ÿè°ƒèŠ‚**ï¼šå¯è°ƒæ•´AIå›å¤çš„è¯­é€Ÿ
- **å£éŸ³é€‰æ‹©**ï¼šæ”¯æŒç¾å¼ã€è‹±å¼ç­‰ä¸åŒå£éŸ³
- **èƒŒæ™¯éŸ³æ¶ˆé™¤**ï¼šæ™ºèƒ½æ¶ˆé™¤ç¯å¢ƒå™ªéŸ³
- **å¤šäººå¯¹è¯**ï¼šæ”¯æŒç¾¤ä½“å¯¹è¯ç»ƒä¹ 

### 2. æ™ºèƒ½å­¦ä¹ å»ºè®®
- **ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„**ï¼šæ ¹æ®ç”¨æˆ·æ°´å¹³åˆ¶å®šå­¦ä¹ è®¡åˆ’
- **å¼±ç‚¹åˆ†æ**ï¼šè¯†åˆ«å‘éŸ³å’Œè¯­æ³•è–„å¼±ç¯èŠ‚
- **å­¦ä¹ æé†’**ï¼šæ™ºèƒ½æ¨é€ç»ƒä¹ æé†’
- **è¿›åº¦æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„å­¦ä¹ æŠ¥å‘Š

### 3. ç¤¾äº¤åŠŸèƒ½
- **å­¦ä¹ å°ç»„**ï¼šåˆ›å»ºå­¦ä¹ å°ç»„è¿›è¡Œäº’åŠ¨
- **æ’è¡Œæ¦œ**ï¼šå‘éŸ³å‡†ç¡®ç‡æ’å
- **å­¦ä¹ åˆ†äº«**ï¼šåˆ†äº«å­¦ä¹ æˆæœå’Œç»éªŒ
- **ä¸“å®¶ç‚¹è¯„**ï¼šé‚€è¯·ä¸“ä¸šæ•™å¸ˆç‚¹è¯„

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. è¯­éŸ³å¤„ç†ä¼˜åŒ–
- **å®æ—¶éŸ³é¢‘å‹ç¼©**ï¼šå‡å°‘ä¼ è¾“å»¶è¿Ÿ
- **ç¼“å­˜æœºåˆ¶**ï¼šå¸¸ç”¨è¯­éŸ³ç¼“å­˜åˆ°æœ¬åœ°
- **æ–­ç‚¹ç»­ä¼ **ï¼šæ”¯æŒç½‘ç»œä¸­æ–­åç»§ç»­å½•éŸ³
- **ç¦»çº¿æ¨¡å¼**ï¼šåŸºæœ¬åŠŸèƒ½æ”¯æŒç¦»çº¿ä½¿ç”¨

### 2. AIå“åº”ä¼˜åŒ–
- **é¢„åŠ è½½æ¨¡å‹**ï¼šæå‰åŠ è½½å¸¸ç”¨AIæ¨¡å‹
- **æ‰¹é‡å¤„ç†**ï¼šå¤šä¸ªè¯·æ±‚åˆå¹¶å¤„ç†
- **æ™ºèƒ½ç¼“å­˜**ï¼šç¼“å­˜AIå›å¤å‡å°‘é‡å¤è®¡ç®—
- **è´Ÿè½½å‡è¡¡**ï¼šåˆ†å¸ƒå¼éƒ¨ç½²æé«˜å“åº”é€Ÿåº¦

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **æ¸è¿›å¼åŠ è½½**ï¼šåŠŸèƒ½æŒ‰éœ€åŠ è½½
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§è®¾å¤‡å°ºå¯¸
- **æ— éšœç¢æ”¯æŒ**ï¼šæ”¯æŒè§†å¬éšœç¢ç”¨æˆ·
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šç•Œé¢æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢

## ğŸ” å®‰å…¨ä¿éšœ

### 1. æ•°æ®å®‰å…¨
- **è¯­éŸ³æ•°æ®åŠ å¯†**ï¼šè¯­éŸ³æ•°æ®ä¼ è¾“å’Œå­˜å‚¨åŠ å¯†
- **éšç§ä¿æŠ¤**ï¼šç”¨æˆ·å¯¹è¯æ•°æ®å®šæœŸæ¸…ç†
- **æƒé™æ§åˆ¶**ï¼šä¸¥æ ¼çš„APIè®¿é—®æƒé™ç®¡ç†
- **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ

### 2. ç³»ç»Ÿå®‰å…¨
- **é˜²æŠ¤æ”»å‡»**ï¼šDDoSé˜²æŠ¤å’ŒSQLæ³¨å…¥é˜²æŠ¤
- **å®‰å…¨è®¤è¯**ï¼šå¤šå› ç´ èº«ä»½è®¤è¯
- **æ•°æ®å¤‡ä»½**ï¼šå®šæœŸæ•°æ®å¤‡ä»½å’Œæ¢å¤æ¼”ç»ƒ
- **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€

## ğŸ“ˆ è¿è¥æŒ‡æ ‡

### 1. ç”¨æˆ·å‚ä¸åº¦
- **æ—¥æ´»è·ƒç”¨æˆ·**ï¼šæ¯æ—¥ä½¿ç”¨è¯­éŸ³åŠŸèƒ½çš„ç”¨æˆ·æ•°
- **ä¼šè¯æ—¶é•¿**ï¼šå¹³å‡æ¯æ¬¡å¯¹è¯çš„æ—¶é•¿
- **ä½¿ç”¨é¢‘ç‡**ï¼šç”¨æˆ·æ¯å‘¨ä½¿ç”¨æ¬¡æ•°
- **åŠŸèƒ½ä½¿ç”¨ç‡**ï¼šå„åŠŸèƒ½æ¨¡å—çš„ä½¿ç”¨æƒ…å†µ

### 2. å­¦ä¹ æ•ˆæœ
- **å‘éŸ³æ”¹å–„ç‡**ï¼šç”¨æˆ·å‘éŸ³è¯„åˆ†æå‡å¹…åº¦
- **è¯æ±‡æŒæ¡åº¦**ï¼šèˆªç©ºè‹±è¯­æœ¯è¯­æŒæ¡æƒ…å†µ
- **å­¦ä¹ å®Œæˆç‡**ï¼šå­¦ä¹ ä»»åŠ¡å®Œæˆæƒ…å†µ
- **æ»¡æ„åº¦è¯„åˆ†**ï¼šç”¨æˆ·å¯¹åŠŸèƒ½çš„æ»¡æ„åº¦

### 3. æŠ€æœ¯æŒ‡æ ‡
- **ç³»ç»Ÿå“åº”æ—¶é—´**ï¼šè¯­éŸ³è¯†åˆ«å’ŒAIå›å¤é€Ÿåº¦
- **é”™è¯¯ç‡**ï¼šè¯­éŸ³è¯†åˆ«é”™è¯¯ç‡
- **ç³»ç»Ÿç¨³å®šæ€§**ï¼šæœåŠ¡å¯ç”¨æ€§å’Œå´©æºƒç‡
- **èµ„æºä½¿ç”¨ç‡**ï¼šäº‘å‡½æ•°å’Œæ•°æ®åº“ä½¿ç”¨æƒ…å†µ

## ğŸ› ï¸ ç»´æŠ¤æŒ‡å—

### 1. æ—¥å¸¸ç»´æŠ¤
- **æ¨¡å‹æ›´æ–°**ï¼šå®šæœŸæ›´æ–°AIå¯¹è¯æ¨¡å‹
- **æ•°æ®æ¸…ç†**ï¼šæ¸…ç†è¿‡æœŸçš„è¯­éŸ³æ•°æ®
- **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **ç”¨æˆ·åé¦ˆ**ï¼šæ”¶é›†å’Œå¤„ç†ç”¨æˆ·åé¦ˆ

### 2. æ•…éšœå¤„ç†
- **æ•…éšœè¯Šæ–­**ï¼šå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜
- **æ•°æ®æ¢å¤**ï¼šæ•°æ®ä¸¢å¤±æ—¶çš„æ¢å¤æ–¹æ¡ˆ
- **æœåŠ¡é™çº§**ï¼šé«˜å³°æœŸçš„æœåŠ¡é™çº§ç­–ç•¥
- **åº”æ€¥é¢„æ¡ˆ**ï¼šçªå‘äº‹ä»¶çš„åº”æ€¥å¤„ç†

### 3. åŠŸèƒ½è¿­ä»£
- **éœ€æ±‚åˆ†æ**ï¼šåˆ†æç”¨æˆ·éœ€æ±‚å’Œä½¿ç”¨æ•°æ®
- **åŠŸèƒ½è®¾è®¡**ï¼šè®¾è®¡æ–°åŠŸèƒ½å’Œä¼˜åŒ–æ–¹æ¡ˆ
- **æµ‹è¯•éªŒè¯**ï¼šåŠŸèƒ½æµ‹è¯•å’Œç”¨æˆ·æµ‹è¯•
- **ä¸Šçº¿å‘å¸ƒ**ï¼šç°åº¦å‘å¸ƒå’Œæ­£å¼å‘å¸ƒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¼€å‘å›¢é˜Ÿè”ç³»æ–¹å¼
- **é¡¹ç›®è´Ÿè´£äºº**ï¼šAIå¼€å‘å·¥ç¨‹å¸ˆ
- **æŠ€æœ¯æ”¯æŒ**ï¼šcloud-support@tencent.com
- **æ–‡æ¡£æ›´æ–°**ï¼šdocs@cloudbase.net
- **Bugåé¦ˆ**ï¼šgithub.com/your-repo/issues

### ç›¸å…³èµ„æºé“¾æ¥
- **äº‘å¼€å‘AIå¼€å‘å¥—ä»¶æ–‡æ¡£**ï¼šhttps://docs.cloudbase.net/ai
- **è…¾è®¯äº‘ASR APIæ–‡æ¡£**ï¼šhttps://cloud.tencent.com/document/product/1093
- **è…¾è®¯äº‘TTS APIæ–‡æ¡£**ï¼šhttps://cloud.tencent.com/document/product/1073
- **BotCoreæ¡†æ¶æ–‡æ¡£**ï¼šhttps://github.com/TencentCloudBase/botcore

---

**ç‰ˆæœ¬ä¿¡æ¯**ï¼šv1.0.0  
**æ›´æ–°æ—¥æœŸ**ï¼š2024å¹´1æœˆ  
**æ–‡æ¡£çŠ¶æ€**ï¼šæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å®Œæˆï¼Œå¾…å¼€å‘å®ç°  

*æœ¬æ–¹æ¡ˆåŸºäºè…¾è®¯äº‘å¼€å‘AIå¼€å‘å¥—ä»¶v1.3.0åˆ¶å®šï¼Œå¦‚æœ‰æŠ€æœ¯æ›´æ–°è¯·åŠæ—¶è°ƒæ•´å®ç°æ–¹æ¡ˆã€‚*